{
  "hash": "ca63926d5a430b75cdc39d7aa16599b6",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: Social dimensions of Eaton and Palisades fires\nsubtitle: Week 8 - Discussion section\nweek: 8\nimage: images/palisades-fire.png\nsidebar: false\n---\n\n<!-- In this discussion section you will ...\n\nFILL OUT\n -->\n\n:::{.callout-caution appearance=\"minimal\"}\nThe work in this section will be part of your final project blog post that will go on your website!\n:::\n\n## Setup\n\n:::{.callout-tip appearance=\"minimal\"}\n1. Find fire perimeters for the Eaton and Palisades fires that occurred in Los Angeles County on 2025. There are several datasets with this information online. You will need to independently select one from a reputable source (it may be more than one file). *These are the same files you will use for assignment 4.* \n\n2. Add the fire perimeter datasets to the `data` directory in your `eds-220-sections` directory.\n\n3. Download the **2024** [Environmental Justice Index data](https://www.atsdr.cdc.gov/place-health/php/eji/eji-data-download.html) for **California** in the **geodatabase** data format. Add it to the `data` directory in your `eds-220-sections` directory.\n:::\n\n\n## About the data\n\nThe [Environmental Justice Index] is [INSERT], it can be viewed and downloaded at \n[EJI website](https://www.atsdr.cdc.gov/place-health/php/eji/index.html). EJI is a [WHO DOES THIS] [@CDC_ATSDR_EJI]\n\n[MINI DESCRIPTION OF WHAT IS IN IT]\n\nYou can interactively explore this dataset through the [EJI explorer](https://www.atsdr.cdc.gov/place-health/php/eji/eji-explorer.html). \n\n[WRITE SOMETHING ABOUT FIRE PERIMETERS]\n\n## 1. Metadata exploration\n\na. Review the CSV with the metadata information for the EJI data.\nb. Look at the variables and with your team **select a few variables** that, in your opinion, could influence a community's response to a wildfire. You'll be working with some of them in the following exercises. \n\n## 2. Polygon intersection\n\na. Open the fire perimeters and the EJI data and do initial data exploration. \nb. Spatially join the EJI data with the Palisades fire perimeter using [`geopandas.sjoin()`](https://geopandas.org/en/stable/docs/reference/api/geopandas.sjoin.html) to get a `geopandas.GeoDataFrame` that will have only have the census tracts intersecting the Palisades fire perimeter. \nc. Create an exploratory map showing \n\n    (1) the census tracts that intersect the Palisades fire perimeter and \n    (2) the Palisades fire perimeter. \n\n:::{.callout-tip appearance=\"minimal\"}\nDiscuss how big is the Palisades fire perimeter in relation to the census tracts.\n:::\n\nd. Create the corresponding `geopandas.GeoDataFrame` and exploratory map for the Eaton fire. \n\n:::{.callout-tip appearance=\"minimal\"}\nDiscuss how big is the Eaton fire perimeter in relation to the census tracts intersectig the Eaton fire perimeter.\n:::\n\n## 3. Polygon clipping\n\na. Clip the census tracts to the Palisades fire perimeter using [`geopandas.clip()`](https://geopandas.org/en/stable/docs/reference/api/geopandas.clip.html). \nb. Do the same for the Eaton fire perimeter. \nc. Quickly visualize your data. \n\n:::{.callout-tip appearance=\"minimal\"}\nDiscuss with your group  the difference between a spatial join (step 2) and clipping (step 3). \nMake sure you understand the difference and what your goal is when transforming geospatial data!\n:::\n\n## 4. Visualize fire perimeters with a basemap\n\nTo add a basemap to our plot we will be using the [`contextily`](https://contextily.readthedocs.io/en/latest/) library. \n\na. Import the `contextily` library at the top of your notebook as `ctx`. This library is already installed in the EDS 220 environment.\n\nb. Use and update the code below to plot the fire perimeters adding a basemap: \n\n```python\nfig, ax = plt.subplots(1, 1, figsize=(14, 12))\n\n# Add basemap using contextily\nctx.add_basemap(ax, source=ctx.providers.OpenStreetMap.Mapnik)\n\n# ADD FIRE PERIMETERS: UPDATE FILL TRANSPARENCY AND COLOR\n\n# ADD LEGEND OR ANNOTATION TO IDENTIFY EACH FIRE\n\n# ADD TITLE\n\nax.axis('off')\n\nplt.tight_layout()\nplt.show()\n```\n\n## 5. Visualize EJI data\na. Use and update the code below to plot one of the variables you and your team explored in step 1 as being relevant to a community's response to a wildfire.\n\n::: {#98cd0d25 .cell execution_count=1}\n``` {.python .cell-code code-fold=\"true\"}\nfig, (ax1, ax2) = plt.subplots(1, 2, figsize=(20, 10))\n\n# UPDATE WITH YOU EJI VARIABLE FROM STEP 1\neji_variable = ''\n\n# Find common min/max for legend range\nvmin = min(census_within_palisades[eji_variable].min(), census_within_eaton[eji_variable].min())\nvmax = max(census_within_palisades[eji_variable].max(), census_within_eaton[eji_variable].max())\n\n# Plot census tracts within Palisades perimeter\ncensus_within_palisades.plot(\n    column= eji_variable,\n    vmin=vmin, vmax=vmax,\n    legend=False,\n    ax=ax1,\n)\nax1.set_title('UPDATE TITLE')\nax1.axis('off')\n\n# Plot census tracts within Eaton perimeter\ncensus_within_eaton.plot(\n    column=eji_variable,\n    vmin=vmin, vmax=vmax,\n    legend=False,\n    ax=ax2,\n)\nax2.set_title('UPDATE TITLE')\nax2.axis('off')\n\n# Add overall title\nfig.suptitle('YOUR VARIABLE HERE - Fire Areas Comparison')\n\n# Add shared colorbar at the bottom\nsm = plt.cm.ScalarMappable( norm=plt.Normalize(vmin=vmin, vmax=vmax))\ncbar_ax = fig.add_axes([0.25, 0.08, 0.5, 0.02])  # [left, bottom, width, height]\ncbar = fig.colorbar(sm, cax=cbar_ax, orientation='horizontal')\ncbar.set_label('YOUR VARIABLE HERE (WITH UNITS)')\n\nplt.show()\n```\n:::\n\n\n:::{.callout-tip appearance=\"minimal\"}\nWith your team, write a short paragraph discussing how or whether this variable is distributed differently across the two fire perimeters. What kind of implications could this have in terms of wildifre relief?\n:::\n\n## References\n\n",
    "supporting": [
      "ds8-eji-eaton-palisades_files"
    ],
    "filters": [],
    "includes": {}
  }
}