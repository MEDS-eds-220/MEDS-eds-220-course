<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>lesson-3-pandas-subsetting – EDS 220 - Working with Environmental Datasets</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">EDS 220 - Working with Environmental Datasets</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html"> 
<span class="menu-text">home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../book/preface.html"> 
<span class="menu-text">notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../discussion-sections/discussion-sections-listing.html"> 
<span class="menu-text">discussion sections</span></a>
  </li>  
  <li class="nav-item">
    <span class="nav-link">
<span class="menu-text">assignments</span>
    </span>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-github" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-bi-github">    
        <li>
    <a class="dropdown-item" href="https://github.com/carmengg/MEDS-eds-220-course">
 <span class="dropdown-text">Source code</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/carmengg/MEDS-eds-220-course/issues">
 <span class="dropdown-text">Report a bug</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <div id="quarto-announcement" data-announcement-id="c7b7782e967bb59a093245536bfed491" class="alert alert-primary hidden"><i class="bi bi-hammer quarto-announcement-icon"></i><div class="quarto-announcement-content">
<p>This wesbite is under construction.</p>
</div><i class="bi bi-x-lg quarto-announcement-action"></i></div>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">In this lesson</h2>
   
  <ul>
  <li><a href="#subsetting" id="toc-subsetting" class="nav-link active" data-scroll-target="#subsetting">2 Subsetting</a>
  <ul class="collapse">
  <li><a href="#learning-objectives" id="toc-learning-objectives" class="nav-link" data-scroll-target="#learning-objectives">Learning objectives</a></li>
  <li><a href="#about-the-data" id="toc-about-the-data" class="nav-link" data-scroll-target="#about-the-data">About the data</a></li>
  <li><a href="#csv-files" id="toc-csv-files" class="nav-link" data-scroll-target="#csv-files">CSV files</a></li>
  <li><a href="#selecting-a-single-column" id="toc-selecting-a-single-column" class="nav-link" data-scroll-target="#selecting-a-single-column">Selecting a single column</a></li>
  <li><a href="#selecting-multiple-columns" id="toc-selecting-multiple-columns" class="nav-link" data-scroll-target="#selecting-multiple-columns">Selecting multiple columns…</a>
  <ul class="collapse">
  <li><a href="#using-a-list-of-column-names" id="toc-using-a-list-of-column-names" class="nav-link" data-scroll-target="#using-a-list-of-column-names">… using a list of column names</a></li>
  <li><a href="#using-a-slice" id="toc-using-a-slice" class="nav-link" data-scroll-target="#using-a-slice">… using a slice</a></li>
  </ul></li>
  <li><a href="#selecting-rows" id="toc-selecting-rows" class="nav-link" data-scroll-target="#selecting-rows">Selecting rows…</a>
  <ul class="collapse">
  <li><a href="#using-a-condition" id="toc-using-a-condition" class="nav-link" data-scroll-target="#using-a-condition">… using a condition</a></li>
  <li><a href="#using-multiple-conditions" id="toc-using-multiple-conditions" class="nav-link" data-scroll-target="#using-multiple-conditions">… using multiple conditions</a></li>
  <li><a href="#by-position" id="toc-by-position" class="nav-link" data-scroll-target="#by-position">… by position</a></li>
  </ul></li>
  <li><a href="#selecting-rows-and-columns-simultaneously" id="toc-selecting-rows-and-columns-simultaneously" class="nav-link" data-scroll-target="#selecting-rows-and-columns-simultaneously">Selecting rows and columns simultaneously…</a>
  <ul class="collapse">
  <li><a href="#by-labels-or-conditions" id="toc-by-labels-or-conditions" class="nav-link" data-scroll-target="#by-labels-or-conditions">…by labels or conditions</a></li>
  <li><a href="#by-position-1" id="toc-by-position-1" class="nav-link" data-scroll-target="#by-position-1">… by position</a></li>
  </ul></li>
  <li><a href="#notes-about-loc-and-iloc" id="toc-notes-about-loc-and-iloc" class="nav-link" data-scroll-target="#notes-about-loc-and-iloc">Notes about <code>loc</code> and <code>iloc</code></a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a></li>
  <li><a href="#resources" id="toc-resources" class="nav-link" data-scroll-target="#resources">Resources</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">




<section id="subsetting" class="level1 page-columns page-full">
<h1>2 Subsetting</h1>
<p>In this lesson we will learn different methods to select data from a <code>pandas.DataFrame</code>. Like it’s often the case when working with the <code>pandas</code> package, there are <em>many</em> ways in which we can subset a data frame. Here we will review the core methods to do this.</p>
<p>A summary of the methods covered in this lesson can be found in <a href="#fig-summary" class="quarto-xref">Figure&nbsp;1</a>.</p>
<section id="learning-objectives" class="level2">
<h2 class="anchored" data-anchor-id="learning-objectives">Learning objectives</h2>
<p>By the end of this lesson, students will be able to:</p>
<ul>
<li>Choose appropriate methods for selecting rows and columns from a <code>pandas.DataFrame</code></li>
<li>Construct conditions to subset rows</li>
<li>Describe the difference between label-based subsetting and position-based subsetting</li>
<li>Apply best practies when using <code>iloc</code> and <code>loc</code> selection</li>
</ul>
</section>
<section id="about-the-data" class="level2">
<h2 class="anchored" data-anchor-id="about-the-data">About the data</h2>
<p>In this lesson we will use annual estimates of bird species abundance in four coastal wetlands along the California coast. This dataset was derived for education purposes from the <a href="https://portal.edirepository.org/nis/mapbrowse?packageid=edi.649.6">UCSB SONGS Mitigation Monitoring: Wetland Performance Standard - Bird Abundance and Species Richness dataset</a> <span class="citation" data-cites="schroeter_ucsb_2024"><a href="#ref-schroeter_ucsb_2024" role="doc-biblioref">[1]</a></span>. The SONGS dataset was collected as part of the <a href="https://marinemitigation.msi.ucsb.edu">San Onofre Nuclear Generating Station (SONGS) San Dieguito Wetland Restoration monitoring program</a>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../../book/images/lesson-3/SONGS_aerial.jpg" class="img-fluid figure-img"></p>
<figcaption>San Onofre Nuclear Generating Station in San Diego County, California. Source: Southern California Edison</figcaption>
</figure>
</div>
<p>The annual bird species abundance estimates is a CSV file with 17 columns. You can see the first three rows below.</p>
<div id="aa0867e1" class="cell" data-execution_count="1">
<div class="cell-output cell-output-display" data-execution_count="1">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">CSM_winter</th>
<th data-quarto-table-cell-role="th">CSM_spring</th>
<th data-quarto-table-cell-role="th">CSM_fall</th>
<th data-quarto-table-cell-role="th">MUL_winter</th>
<th data-quarto-table-cell-role="th">MUL_spring</th>
<th data-quarto-table-cell-role="th">MUL_fall</th>
<th data-quarto-table-cell-role="th">SDW_winter</th>
<th data-quarto-table-cell-role="th">SDW_spring</th>
<th data-quarto-table-cell-role="th">SDW_fall</th>
<th data-quarto-table-cell-role="th">TJE_winter</th>
<th data-quarto-table-cell-role="th">TJE_spring</th>
<th data-quarto-table-cell-role="th">TJE_fall</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2010</td>
<td>39.0</td>
<td>40.0</td>
<td>50.0</td>
<td>45.0</td>
<td>NaN</td>
<td>61.0</td>
<td>NaN</td>
<td>75.0</td>
<td>85.0</td>
<td>NaN</td>
<td>NaN</td>
<td>81.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2011</td>
<td>48.0</td>
<td>44.0</td>
<td>NaN</td>
<td>58.0</td>
<td>52.0</td>
<td>NaN</td>
<td>78.0</td>
<td>74.0</td>
<td>NaN</td>
<td>67.0</td>
<td>70.0</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2012</td>
<td>51.0</td>
<td>43.0</td>
<td>49.0</td>
<td>57.0</td>
<td>58.0</td>
<td>53.0</td>
<td>71.0</td>
<td>72.0</td>
<td>73.0</td>
<td>70.0</td>
<td>63.0</td>
<td>69.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The four wetlands where the bird surveys occured are Carpinteria Salt Marsh (CSM), Mugu Lagoon (MUL), the San Dieguito Wetland (SDW), and the Tijuana Estuary (TJE). The values from the second column to the last column correspond to the number of different bird species recorded across the survey sites in each wetland during winter, spring, and fall of a given year. For example, the <code>CSM_fall</code> column has the number of species recorded in fall at Carpinteria Salt Marsh across years. The <code>year</code> column corresponds to the calendar year on which the data was collected. Surveys have happened yearly from 2010 to 2023.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../../book/images/lesson-3/Mugu_Lagoon_from_the_Mugu_Peak_Trail.jpg" class="img-fluid figure-img"></p>
<figcaption>Mugu Lagoon in Ventura County, California, seen from the Mugu Peak Trail. Source: USA National Park Service</figcaption>
</figure>
</div>
</section>
<section id="csv-files" class="level2">
<h2 class="anchored" data-anchor-id="csv-files">CSV files</h2>
<p>A <strong>CSV (Comma-Separated Values) file</strong> is an open, simple text format for storing tabular data, with rows separated by line breaks and columns by commas. It’s widely used in environmental science for sharing datasets like species counts and environmental monitoring data because it’s easy to create, read, and process in different platforms, without the need of proprietary software.</p>
<p>To read in a CSV file into our Python workspace as <code>pandas.DataFrame</code> we use the <code>pandas.read_csv</code> function:</p>
<div id="eabede2c" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in file, argument is the file path</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">'data/wetlands_seasonal_bird_diversity.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, we obtain some high-level information about this data frame:</p>
<div id="bec27323" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print data frame's first five rows </span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">CSM_winter</th>
<th data-quarto-table-cell-role="th">CSM_spring</th>
<th data-quarto-table-cell-role="th">CSM_fall</th>
<th data-quarto-table-cell-role="th">MUL_winter</th>
<th data-quarto-table-cell-role="th">MUL_spring</th>
<th data-quarto-table-cell-role="th">MUL_fall</th>
<th data-quarto-table-cell-role="th">SDW_winter</th>
<th data-quarto-table-cell-role="th">SDW_spring</th>
<th data-quarto-table-cell-role="th">SDW_fall</th>
<th data-quarto-table-cell-role="th">TJE_winter</th>
<th data-quarto-table-cell-role="th">TJE_spring</th>
<th data-quarto-table-cell-role="th">TJE_fall</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2010</td>
<td>39.0</td>
<td>40.0</td>
<td>50.0</td>
<td>45.0</td>
<td>NaN</td>
<td>61.0</td>
<td>NaN</td>
<td>75.0</td>
<td>85.0</td>
<td>NaN</td>
<td>NaN</td>
<td>81.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2011</td>
<td>48.0</td>
<td>44.0</td>
<td>NaN</td>
<td>58.0</td>
<td>52.0</td>
<td>NaN</td>
<td>78.0</td>
<td>74.0</td>
<td>NaN</td>
<td>67.0</td>
<td>70.0</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2012</td>
<td>51.0</td>
<td>43.0</td>
<td>49.0</td>
<td>57.0</td>
<td>58.0</td>
<td>53.0</td>
<td>71.0</td>
<td>72.0</td>
<td>73.0</td>
<td>70.0</td>
<td>63.0</td>
<td>69.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2013</td>
<td>42.0</td>
<td>46.0</td>
<td>38.0</td>
<td>60.0</td>
<td>58.0</td>
<td>62.0</td>
<td>69.0</td>
<td>70.0</td>
<td>70.0</td>
<td>69.0</td>
<td>74.0</td>
<td>64.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2014</td>
<td>38.0</td>
<td>43.0</td>
<td>45.0</td>
<td>49.0</td>
<td>52.0</td>
<td>57.0</td>
<td>61.0</td>
<td>78.0</td>
<td>71.0</td>
<td>60.0</td>
<td>81.0</td>
<td>62.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="6f7323f5" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print data frame's last five rows </span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>df.tail()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">CSM_winter</th>
<th data-quarto-table-cell-role="th">CSM_spring</th>
<th data-quarto-table-cell-role="th">CSM_fall</th>
<th data-quarto-table-cell-role="th">MUL_winter</th>
<th data-quarto-table-cell-role="th">MUL_spring</th>
<th data-quarto-table-cell-role="th">MUL_fall</th>
<th data-quarto-table-cell-role="th">SDW_winter</th>
<th data-quarto-table-cell-role="th">SDW_spring</th>
<th data-quarto-table-cell-role="th">SDW_fall</th>
<th data-quarto-table-cell-role="th">TJE_winter</th>
<th data-quarto-table-cell-role="th">TJE_spring</th>
<th data-quarto-table-cell-role="th">TJE_fall</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">9</td>
<td>2019</td>
<td>39.0</td>
<td>39.0</td>
<td>40.0</td>
<td>57.0</td>
<td>52.0</td>
<td>53.0</td>
<td>54.0</td>
<td>55.0</td>
<td>53.0</td>
<td>63.0</td>
<td>54.0</td>
<td>50.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">10</td>
<td>2020</td>
<td>46.0</td>
<td>NaN</td>
<td>47.0</td>
<td>56.0</td>
<td>NaN</td>
<td>66.0</td>
<td>57.0</td>
<td>NaN</td>
<td>58.0</td>
<td>54.0</td>
<td>40.0</td>
<td>54.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">11</td>
<td>2021</td>
<td>47.0</td>
<td>44.0</td>
<td>53.0</td>
<td>54.0</td>
<td>55.0</td>
<td>60.0</td>
<td>57.0</td>
<td>58.0</td>
<td>57.0</td>
<td>53.0</td>
<td>68.0</td>
<td>51.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12</td>
<td>2022</td>
<td>40.0</td>
<td>46.0</td>
<td>49.0</td>
<td>60.0</td>
<td>55.0</td>
<td>65.0</td>
<td>57.0</td>
<td>60.0</td>
<td>57.0</td>
<td>60.0</td>
<td>61.0</td>
<td>60.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">13</td>
<td>2023</td>
<td>56.0</td>
<td>43.0</td>
<td>36.0</td>
<td>72.0</td>
<td>59.0</td>
<td>53.0</td>
<td>64.0</td>
<td>63.0</td>
<td>33.0</td>
<td>60.0</td>
<td>56.0</td>
<td>38.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="2fc68157" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print data frame's column names</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>df.columns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>Index(['year', 'CSM_winter', 'CSM_spring', 'CSM_fall', 'MUL_winter',
       'MUL_spring', 'MUL_fall', 'SDW_winter', 'SDW_spring', 'SDW_fall',
       'TJE_winter', 'TJE_spring', 'TJE_fall'],
      dtype='object')</code></pre>
</div>
</div>
<div id="4f379df8" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># List the data types of each column</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>df.dtypes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>year            int64
CSM_winter    float64
CSM_spring    float64
CSM_fall      float64
MUL_winter    float64
MUL_spring    float64
MUL_fall      float64
SDW_winter    float64
SDW_spring    float64
SDW_fall      float64
TJE_winter    float64
TJE_spring    float64
TJE_fall      float64
dtype: object</code></pre>
</div>
</div>
<div id="4fee0bd9" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print data frame's shape: output is a tuple (# rows, # columns)</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>df.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>(14, 13)</code></pre>
</div>
</div>
</section>
<section id="selecting-a-single-column" class="level2">
<h2 class="anchored" data-anchor-id="selecting-a-single-column">Selecting a single column</h2>
<p>Selecting a single column by column name is the simplest case for selecting data in a data frame. The genereal syntax to do this is:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'column_name'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Notice the column name is given as string inside the square brackets. This is an example of <strong>label-based subsetting</strong>, which means we want to select data from our data frame using the <em>names</em> of the columns, <em>not their position</em>. When we select rows or column using their position, we are doing <strong>position-based subsetting</strong>. We’ll see some methods to do this when we move into selecting rows.</p>
<section id="example" class="level4">
<h4 class="anchored" data-anchor-id="example">Example</h4>
<p>Suppose we are interested in the number of bird species observed at the Mugu Lagoon in spring. We can access that single column in this way:</p>
<div id="44205ad0" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select a single column by using square brackets []</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>mul_spring <span class="op">=</span> df[<span class="st">'MUL_spring'</span>]</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print first five elements in this column</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>mul_spring.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>0     NaN
1    52.0
2    58.0
3    58.0
4    52.0
Name: MUL_spring, dtype: float64</code></pre>
</div>
</div>
<p>Since we only selected a single column, <code>mul_spring</code> is a <code>pandas.Series</code>:</p>
<div id="e78afb2f" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the type of the ouput</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(mul_spring))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.series.Series'&gt;</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<code>pd.DataFrame</code> = dictionary of columns
</div>
</div>
<div class="callout-body-container callout-body">
<p>Remember we can think of a <code>pandas.DataFrame</code> as a dictionary of its columns? Then we can access a single column using the column name as the key, just like we would do in a dictionary. That is the we just used: <code>df['column_name']</code>.</p>
</div>
</div>
<p>We can also do label-based subsetting of a single column using attribute syntax:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>df.column_name</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For example, to see the head of the <code>MUL_spring</code> column we would do:</p>
<div id="b6f8bf76" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>df.MUL_spring.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>0     NaN
1    52.0
2    58.0
3    58.0
4    52.0
Name: MUL_spring, dtype: float64</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Favor <code>df['column_name']</code> instead of <code>df.column_name</code>
</div>
</div>
<div class="callout-body-container callout-body">
<p>In general, it is better to use the <code>df['column_name']</code> syntax. A couple reasons why are:</p>
<ul>
<li><code>df['column_name']</code> can take in any column name, while <code>df.column_name</code> only works if the column name has no spaces or special characters</li>
<li><code>df['column_name']</code> avoids conflicts with <code>pd.DataFrame</code> methods and attributes. For example, if <code>df</code> has a column named <code>count</code>, it’s ambiguous whehter <code>pd.count</code> is referring to the <a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.count.html"><code>count()</code> method</a> or the <code>count</code> column.</li>
</ul>
</div>
</div>
</section>
</section>
<section id="selecting-multiple-columns" class="level2">
<h2 class="anchored" data-anchor-id="selecting-multiple-columns">Selecting multiple columns…</h2>
<section id="using-a-list-of-column-names" class="level3">
<h3 class="anchored" data-anchor-id="using-a-list-of-column-names">… using a list of column names</h3>
<p>We can select multiple columns in a single call by passing a list with the column names to the square brackets <code>[]</code>:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">'column_1'</span>, <span class="st">'column_10'</span>, <span class="st">'column_245'</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Notice there are double square brackets. This is because we are passing the list of names <code>['column_1', 'column_10', 'column_245']</code> to the selection brakcets <code>[]</code>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Check-in
</div>
</div>
<div class="callout-body-container callout-body">
<p>Is this an example of label-based selection or location-based selection?</p>
</div>
</div>
<section id="example-1" class="level4">
<h4 class="anchored" data-anchor-id="example-1">Example</h4>
<p>If we want to look at the species in the Tijuana Estuary during winter and fall, then we can select these columns like this:</p>
<div id="719d832a" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select columns with names "europe" and "asia"</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>tje_wf <span class="op">=</span> df[[<span class="st">'TJE_winter'</span>,<span class="st">'TJE_fall'</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Notice there are double square brackets. This is because we are passing the list of names <code>['europe','asia']</code> to the selection brakcets <code>[]</code>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Check-in
</div>
</div>
<div class="callout-body-container callout-body">
<p>What is the type and shape of the <code>tje_wf</code> output? Verify your answer.</p>
</div>
</div>
</section>
</section>
<section id="using-a-slice" class="level3">
<h3 class="anchored" data-anchor-id="using-a-slice">… using a slice</h3>
<p>To select a slice of the columns we will use a special case of <strong><code>loc</code> selection</strong> (we’ll cover the general one by the end of the lesson). The syntax will be</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>df.loc[ : , <span class="st">'column_start'</span>:<span class="st">'column_end'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>where <code>column_start</code> and <code>column_end</code> are, respectively, the starting point and endpoint of the column slice we want to subset from the data frame.</p>
<p>Notice two things:</p>
<ul>
<li>the first value passed to <code>loc</code> is used for selecting rows, using a colon <code>:</code> as the row-selection parameter means “select all the rows”</li>
<li>the slice of the data frame we’ll obtain includes both endpoints of the slice <code>'column_start':'column_end'</code>. In other words, we’ll get the <code>column_start</code> column <em>and</em> the <code>column_end</code> column. This is different from how slicing works in base Python and NumPy, where the endpoint is not included.</li>
</ul>
<section id="example-2" class="level4">
<h4 class="anchored" data-anchor-id="example-2">Example</h4>
<p>Let’s select the slice of columns that covers all data from Carpinteria Salt Marsh and Mugu Lagoon. This corresponds to all columns between <code>CSM_winter</code> and <code>MUL_fall</code>.</p>
<div id="6ca5d702" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select columns between 'CSM_winter' and 'MUL_fall'</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>csm_mul <span class="op">=</span> df.loc[:,<span class="st">'CSM_winter'</span>:<span class="st">'MUL_fall'</span>]</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>csm_mul.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">CSM_winter</th>
<th data-quarto-table-cell-role="th">CSM_spring</th>
<th data-quarto-table-cell-role="th">CSM_fall</th>
<th data-quarto-table-cell-role="th">MUL_winter</th>
<th data-quarto-table-cell-role="th">MUL_spring</th>
<th data-quarto-table-cell-role="th">MUL_fall</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>39.0</td>
<td>40.0</td>
<td>50.0</td>
<td>45.0</td>
<td>NaN</td>
<td>61.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>48.0</td>
<td>44.0</td>
<td>NaN</td>
<td>58.0</td>
<td>52.0</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>51.0</td>
<td>43.0</td>
<td>49.0</td>
<td>57.0</td>
<td>58.0</td>
<td>53.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>42.0</td>
<td>46.0</td>
<td>38.0</td>
<td>60.0</td>
<td>58.0</td>
<td>62.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>38.0</td>
<td>43.0</td>
<td>45.0</td>
<td>49.0</td>
<td>52.0</td>
<td>57.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<!-- TODO 
### ... using a condition
fall_columns = df.filter(like='fall')
-->
</section>
</section>
</section>
<section id="selecting-rows" class="level2">
<h2 class="anchored" data-anchor-id="selecting-rows">Selecting rows…</h2>
<p>Now that we are familiar with some methods for selecting columns, let’s move on to selecting rows.</p>
<section id="using-a-condition" class="level3">
<h3 class="anchored" data-anchor-id="using-a-condition">… using a condition</h3>
<p>Selecting rows that satisfy a particular condition is one of the most usual kinds of row subsetting. The general syntax for this type of selection is</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>df[condition_on_rows]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>That <code>condition_of_rows</code> can be a myriad things, let’s see some usual scenarios.</p>
<section id="example-3" class="level4">
<h4 class="anchored" data-anchor-id="example-3">Example</h4>
<p>Suppose we are intersted in all data after 2020. We can select these rows in this way:</p>
<div id="255ec7ea" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select all rows with year &gt; 2020</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>post_2020 <span class="op">=</span> df[df[<span class="st">'year'</span>]<span class="op">&gt;</span><span class="dv">2020</span>]</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>post_2020</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">CSM_winter</th>
<th data-quarto-table-cell-role="th">CSM_spring</th>
<th data-quarto-table-cell-role="th">CSM_fall</th>
<th data-quarto-table-cell-role="th">MUL_winter</th>
<th data-quarto-table-cell-role="th">MUL_spring</th>
<th data-quarto-table-cell-role="th">MUL_fall</th>
<th data-quarto-table-cell-role="th">SDW_winter</th>
<th data-quarto-table-cell-role="th">SDW_spring</th>
<th data-quarto-table-cell-role="th">SDW_fall</th>
<th data-quarto-table-cell-role="th">TJE_winter</th>
<th data-quarto-table-cell-role="th">TJE_spring</th>
<th data-quarto-table-cell-role="th">TJE_fall</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">11</td>
<td>2021</td>
<td>47.0</td>
<td>44.0</td>
<td>53.0</td>
<td>54.0</td>
<td>55.0</td>
<td>60.0</td>
<td>57.0</td>
<td>58.0</td>
<td>57.0</td>
<td>53.0</td>
<td>68.0</td>
<td>51.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12</td>
<td>2022</td>
<td>40.0</td>
<td>46.0</td>
<td>49.0</td>
<td>60.0</td>
<td>55.0</td>
<td>65.0</td>
<td>57.0</td>
<td>60.0</td>
<td>57.0</td>
<td>60.0</td>
<td>61.0</td>
<td>60.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">13</td>
<td>2023</td>
<td>56.0</td>
<td>43.0</td>
<td>36.0</td>
<td>72.0</td>
<td>59.0</td>
<td>53.0</td>
<td>64.0</td>
<td>63.0</td>
<td>33.0</td>
<td>60.0</td>
<td>56.0</td>
<td>38.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Let’s break down what is happening here. The condition for our rows is <code>df['year']&gt;2020</code>, this is a <code>pandas.Series</code> with boolean values (<code>True</code> or <code>False</code>) indicating which rows satisfy the condition year&gt;2020:</p>
<div id="9d94bcc0" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the type of df['year']&gt;1996</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(df[<span class="st">'year'</span>]<span class="op">&gt;</span><span class="dv">2020</span>))</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the boolean series</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'year'</span>]<span class="op">&gt;</span><span class="dv">2020</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.series.Series'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>0     False
1     False
2     False
3     False
4     False
5     False
6     False
7     False
8     False
9     False
10    False
11     True
12     True
13     True
Name: year, dtype: bool</code></pre>
</div>
</div>
<p>When we pass such a series of boolean values to the selection brackets <code>[]</code> we keep only the rows that correspond to a <code>True</code> value.</p>
<!-- TO DO: would be nice to add a diagram about selecting rows -->
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Check-in
</div>
</div>
<div class="callout-body-container callout-body">
<p>Get the subset of our data frame on which the San Dieguito Wetland has at least 75 species recorded during spring.</p>
</div>
</div>
</section>
<section id="example-4" class="level4">
<h4 class="anchored" data-anchor-id="example-4">Example</h4>
<p>Suppose we want to look at data from years 2012 to 2015 (including both years). One way of doing this is to use the <code>between</code> operator in our condition:</p>
<div id="7ebe65c0" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>subset <span class="op">=</span> df[df[<span class="st">'year'</span>].between(<span class="dv">2012</span>, <span class="dv">2015</span>)]</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>subset</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">CSM_winter</th>
<th data-quarto-table-cell-role="th">CSM_spring</th>
<th data-quarto-table-cell-role="th">CSM_fall</th>
<th data-quarto-table-cell-role="th">MUL_winter</th>
<th data-quarto-table-cell-role="th">MUL_spring</th>
<th data-quarto-table-cell-role="th">MUL_fall</th>
<th data-quarto-table-cell-role="th">SDW_winter</th>
<th data-quarto-table-cell-role="th">SDW_spring</th>
<th data-quarto-table-cell-role="th">SDW_fall</th>
<th data-quarto-table-cell-role="th">TJE_winter</th>
<th data-quarto-table-cell-role="th">TJE_spring</th>
<th data-quarto-table-cell-role="th">TJE_fall</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2012</td>
<td>51.0</td>
<td>43.0</td>
<td>49.0</td>
<td>57.0</td>
<td>58.0</td>
<td>53.0</td>
<td>71.0</td>
<td>72.0</td>
<td>73.0</td>
<td>70.0</td>
<td>63.0</td>
<td>69.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2013</td>
<td>42.0</td>
<td>46.0</td>
<td>38.0</td>
<td>60.0</td>
<td>58.0</td>
<td>62.0</td>
<td>69.0</td>
<td>70.0</td>
<td>70.0</td>
<td>69.0</td>
<td>74.0</td>
<td>64.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2014</td>
<td>38.0</td>
<td>43.0</td>
<td>45.0</td>
<td>49.0</td>
<td>52.0</td>
<td>57.0</td>
<td>61.0</td>
<td>78.0</td>
<td>71.0</td>
<td>60.0</td>
<td>81.0</td>
<td>62.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>2015</td>
<td>44.0</td>
<td>42.0</td>
<td>45.0</td>
<td>58.0</td>
<td>50.0</td>
<td>51.0</td>
<td>71.0</td>
<td>61.0</td>
<td>65.0</td>
<td>73.0</td>
<td>76.0</td>
<td>64.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Let’s break down this code:</p>
<ol type="1">
<li><p><code>df['year']</code> is the column with the year values, a <code>pandas.Series</code></p></li>
<li><p>in <code>df['year'].between()</code>, we have that <a href="https://pandas.pydata.org/docs/reference/api/pandas.Series.between.html"><code>between</code> is a method for the <code>pandas.Series</code></a> and we are calling it using the dot <code>.</code></p></li>
<li><p><code>(2012, 2015)</code> are the parameters for the <code>between()</code> method, from the <code>pandas</code> documentation we can see this method will subset including both endpoints</p></li>
<li><p><code>df['year'].between(2012, 2015)</code> is then a <code>pandas.Series</code> of boolean values indicating which rows have year equal to 2012, 2013, 2014, or 2015.</p></li>
<li><p>when we put <code>df['year'].between(2012, 2015)</code> inside the selection brackets <code>[]</code> we obtain the rows of the data frame with year equal to 2012, …, 2015.</p></li>
</ol>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Avoid using <code>loc</code> for selecting only rows
</div>
</div>
<div class="callout-body-container callout-body">
<p>It is equivalent to write</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select rows with year&lt;2015</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>df[df[<span class="st">'year'</span>] <span class="op">&lt;</span> <span class="dv">2015</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>and</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select rows with year&lt;2015 using loc</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>df.loc[ df[<span class="st">'year'</span>] <span class="op">&lt;</span><span class="dv">2015</span> , :]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In the second one:</p>
<ul>
<li><p>we are using the <code>df.loc[ row-selection , column-selection]</code> syntax</p></li>
<li><p>the <code>row-selection</code> parameter is the condition <code>df['year']&lt;2015</code></p></li>
<li><p>the <code>column-selection</code> parameter is a colon <code>:</code>, which indicates we want all columns for the rows we are selecting.</p></li>
</ul>
<p>We prefer the first syntax when we are selecting rows and not columns since it is simpler.</p>
</div>
</div>
</section>
</section>
<section id="using-multiple-conditions" class="level3">
<h3 class="anchored" data-anchor-id="using-multiple-conditions">… using multiple conditions</h3>
<p>We can combine multipe conditions to select rows by surrounding each one in parenthesis <code>()</code> and using the or operator <code>|</code> and the and operator <code>&amp;</code>.</p>
<section id="example-or" class="level4">
<h4 class="anchored" data-anchor-id="example-or">Example: or</h4>
<p>Let’s select rows in which the Carpinteria Salt Marsh has more than 50 registered in winter <em>or</em> fall:</p>
<div id="70a54e9b" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>df[ (df[<span class="st">'CSM_winter'</span>]<span class="op">&gt;</span><span class="dv">50</span>) <span class="op">|</span> (df[<span class="st">'CSM_fall'</span>]<span class="op">&gt;</span><span class="dv">50</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">CSM_winter</th>
<th data-quarto-table-cell-role="th">CSM_spring</th>
<th data-quarto-table-cell-role="th">CSM_fall</th>
<th data-quarto-table-cell-role="th">MUL_winter</th>
<th data-quarto-table-cell-role="th">MUL_spring</th>
<th data-quarto-table-cell-role="th">MUL_fall</th>
<th data-quarto-table-cell-role="th">SDW_winter</th>
<th data-quarto-table-cell-role="th">SDW_spring</th>
<th data-quarto-table-cell-role="th">SDW_fall</th>
<th data-quarto-table-cell-role="th">TJE_winter</th>
<th data-quarto-table-cell-role="th">TJE_spring</th>
<th data-quarto-table-cell-role="th">TJE_fall</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2012</td>
<td>51.0</td>
<td>43.0</td>
<td>49.0</td>
<td>57.0</td>
<td>58.0</td>
<td>53.0</td>
<td>71.0</td>
<td>72.0</td>
<td>73.0</td>
<td>70.0</td>
<td>63.0</td>
<td>69.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>2021</td>
<td>47.0</td>
<td>44.0</td>
<td>53.0</td>
<td>54.0</td>
<td>55.0</td>
<td>60.0</td>
<td>57.0</td>
<td>58.0</td>
<td>57.0</td>
<td>53.0</td>
<td>68.0</td>
<td>51.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">13</td>
<td>2023</td>
<td>56.0</td>
<td>43.0</td>
<td>36.0</td>
<td>72.0</td>
<td>59.0</td>
<td>53.0</td>
<td>64.0</td>
<td>63.0</td>
<td>33.0</td>
<td>60.0</td>
<td>56.0</td>
<td>38.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="example-and" class="level4">
<h4 class="anchored" data-anchor-id="example-and">Example: and</h4>
<p>Let’s select rows with in which both the Carpinteria Salt Marsh and the San Dieguito Wetland have more than 60 reported bird species during spring:</p>
<div id="8a5df159" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>df[ (df[<span class="st">'CSM_spring'</span>]<span class="op">&gt;</span><span class="dv">60</span>) <span class="op">&amp;</span> (df[<span class="st">'SDW_spring'</span>]<span class="op">&gt;</span><span class="dv">60</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">CSM_winter</th>
<th data-quarto-table-cell-role="th">CSM_spring</th>
<th data-quarto-table-cell-role="th">CSM_fall</th>
<th data-quarto-table-cell-role="th">MUL_winter</th>
<th data-quarto-table-cell-role="th">MUL_spring</th>
<th data-quarto-table-cell-role="th">MUL_fall</th>
<th data-quarto-table-cell-role="th">SDW_winter</th>
<th data-quarto-table-cell-role="th">SDW_spring</th>
<th data-quarto-table-cell-role="th">SDW_fall</th>
<th data-quarto-table-cell-role="th">TJE_winter</th>
<th data-quarto-table-cell-role="th">TJE_spring</th>
<th data-quarto-table-cell-role="th">TJE_fall</th>
</tr>
</thead>
<tbody>
</tbody>
</table>

</div>
</div>
</div>
<p>An empty data frame! That’s ok, it just means there are no rows that satisfy the given condition.</p>
</section>
</section>
<section id="by-position" class="level3">
<h3 class="anchored" data-anchor-id="by-position">… by position</h3>
<p>All the selections we have done so far have been using labels. Sometimes we may want to select certain rows depending on their <em>actual position</em> in the data frame in other words, using <strong>position-based subsetting</strong>. To do this, we use <strong><code>iloc</code> selection</strong> with the syntax</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a> df.iloc[row<span class="op">-</span>indices]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>iloc</code> stands for integer-location based indexing.</p>
<section id="example-5" class="level4">
<h4 class="anchored" data-anchor-id="example-5">Example</h4>
<div id="33646f4c" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select the fifth row (index=4)</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>df.iloc[<span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>year          2014.0
CSM_winter      38.0
CSM_spring      43.0
CSM_fall        45.0
MUL_winter      49.0
MUL_spring      52.0
MUL_fall        57.0
SDW_winter      61.0
SDW_spring      78.0
SDW_fall        71.0
TJE_winter      60.0
TJE_spring      81.0
TJE_fall        62.0
Name: 4, dtype: float64</code></pre>
</div>
</div>
<div id="039bbd60" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select rows 9 through 13, inclduing 13</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>df.iloc[<span class="dv">9</span>:<span class="dv">14</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">CSM_winter</th>
<th data-quarto-table-cell-role="th">CSM_spring</th>
<th data-quarto-table-cell-role="th">CSM_fall</th>
<th data-quarto-table-cell-role="th">MUL_winter</th>
<th data-quarto-table-cell-role="th">MUL_spring</th>
<th data-quarto-table-cell-role="th">MUL_fall</th>
<th data-quarto-table-cell-role="th">SDW_winter</th>
<th data-quarto-table-cell-role="th">SDW_spring</th>
<th data-quarto-table-cell-role="th">SDW_fall</th>
<th data-quarto-table-cell-role="th">TJE_winter</th>
<th data-quarto-table-cell-role="th">TJE_spring</th>
<th data-quarto-table-cell-role="th">TJE_fall</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">9</td>
<td>2019</td>
<td>39.0</td>
<td>39.0</td>
<td>40.0</td>
<td>57.0</td>
<td>52.0</td>
<td>53.0</td>
<td>54.0</td>
<td>55.0</td>
<td>53.0</td>
<td>63.0</td>
<td>54.0</td>
<td>50.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">10</td>
<td>2020</td>
<td>46.0</td>
<td>NaN</td>
<td>47.0</td>
<td>56.0</td>
<td>NaN</td>
<td>66.0</td>
<td>57.0</td>
<td>NaN</td>
<td>58.0</td>
<td>54.0</td>
<td>40.0</td>
<td>54.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">11</td>
<td>2021</td>
<td>47.0</td>
<td>44.0</td>
<td>53.0</td>
<td>54.0</td>
<td>55.0</td>
<td>60.0</td>
<td>57.0</td>
<td>58.0</td>
<td>57.0</td>
<td>53.0</td>
<td>68.0</td>
<td>51.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12</td>
<td>2022</td>
<td>40.0</td>
<td>46.0</td>
<td>49.0</td>
<td>60.0</td>
<td>55.0</td>
<td>65.0</td>
<td>57.0</td>
<td>60.0</td>
<td>57.0</td>
<td>60.0</td>
<td>61.0</td>
<td>60.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">13</td>
<td>2023</td>
<td>56.0</td>
<td>43.0</td>
<td>36.0</td>
<td>72.0</td>
<td>59.0</td>
<td>53.0</td>
<td>64.0</td>
<td>63.0</td>
<td>33.0</td>
<td>60.0</td>
<td>56.0</td>
<td>38.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Notice that, since we are back to indexing by position, the right endpoint of the slice is not included in the ouput.</p>
</section>
</section>
</section>
<section id="selecting-rows-and-columns-simultaneously" class="level2">
<h2 class="anchored" data-anchor-id="selecting-rows-and-columns-simultaneously">Selecting rows and columns simultaneously…</h2>
<p>Selecting rows and columns simultaneously can be done using <code>loc</code> (labels) or <code>iloc</code> (positions).</p>
<section id="by-labels-or-conditions" class="level3">
<h3 class="anchored" data-anchor-id="by-labels-or-conditions">…by labels or conditions</h3>
<p>When we want to select rows and columns simultaneously by labels (including using conditions) we can use <code>loc</code> selection with the syntax</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>df.loc[ row<span class="op">-</span>selection , column<span class="op">-</span>selection]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>specifying both paratmers: <code>row-selection</code> and <code>column-selection</code>. These parameters can be a condition or a subset of labels from the index or the column names.</p>
<section id="example-6" class="level4">
<h4 class="anchored" data-anchor-id="example-6">Example</h4>
<p>Let’s select the winter surveys for Mugu Lagoon and the Tijuana Estuary after 2020:</p>
<div id="f1f22f21" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'year'</span>]<span class="op">&gt;</span><span class="dv">2020</span>, [<span class="st">'MUL_winter'</span>,<span class="st">'TJE_winter'</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">MUL_winter</th>
<th data-quarto-table-cell-role="th">TJE_winter</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">11</td>
<td>54.0</td>
<td>53.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12</td>
<td>60.0</td>
<td>60.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">13</td>
<td>72.0</td>
<td>60.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Let’s break down this code:</p>
<ul>
<li><p>we are using the <code>df.loc[ row-selection , column-selection]</code> syntax</p></li>
<li><p>the <code>row-selection</code> parameter is the condition <code>df['year']&gt;2020</code>, which is a boolean array saying which years are greater than 2020</p></li>
<li><p>the <code>column-selection</code> parameter is <code>['MUL_winter','TJE_winter']</code> which is a list with the names of the two columns we are interested in.</p></li>
</ul>
</section>
</section>
<section id="by-position-1" class="level3">
<h3 class="anchored" data-anchor-id="by-position-1">… by position</h3>
<p>When we want to select rows and columns simultaneously by position we use <code>iloc</code> selection with the syntax:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>df.iloc[ row<span class="op">-</span>indices , column<span class="op">-</span>indices]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="example-7" class="level4">
<h4 class="anchored" data-anchor-id="example-7">Example</h4>
<p>Suppose we want to select rows 3-7 (including 7) and columns 3 and 4:</p>
<div id="c422f964" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>df.iloc[ <span class="dv">3</span>:<span class="dv">8</span>, [<span class="dv">3</span>,<span class="dv">4</span>] ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">CSM_fall</th>
<th data-quarto-table-cell-role="th">MUL_winter</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>38.0</td>
<td>60.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>45.0</td>
<td>49.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>45.0</td>
<td>58.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">6</td>
<td>47.0</td>
<td>63.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7</td>
<td>43.0</td>
<td>57.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Let’s break it down:</p>
<ul>
<li><p>we are using the <code>df.iloc[ row-indices , column-indices]</code> syntax to select by position</p></li>
<li><p>the <code>row-indices</code> parameter is the slice <em>of integer indices</em> 3:8. Remember the right endpoint (8) won’t be included.</p></li>
<li><p>the <code>column-indices</code> parameter is the list of integer indices 3 and 4. This means we are selecting the fourth and fifth column.</p></li>
</ul>
</section>
</section>
</section>
<section id="notes-about-loc-and-iloc" class="level2">
<h2 class="anchored" data-anchor-id="notes-about-loc-and-iloc">Notes about <code>loc</code> and <code>iloc</code></h2>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<code>iloc</code> vs.&nbsp;<code>loc</code>: which one does what?
</div>
</div>
<div class="callout-body-container callout-body">
<p>At the beginning, the difference between <code>iloc</code> and <code>loc</code> can be confusing. Remember the <code>i</code> in <code>iloc</code> stands for <em>integer location</em>, this reminds us <code>iloc</code> only uses integer indexing to retrieve information from the data frames in the same way as indexing for Python lists.</p>
<p>If you want to dive deeper, this is a great discussion about the difference between <code>iloc</code> and <code>loc</code>: <a href="https://stackoverflow.com/questions/31593201/how-are-iloc-and-loc-different/31593712#31593712">Stackoverflow - How are iloc and loc different?</a></p>
<p>And, as always, the documentation will provide you with more information: <a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.loc.html"><code>pandas.DataFrame.loc</code></a> and <a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.iloc.html"><code>pandas.DataFrame.iloc</code></a>.</p>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<code>iloc</code> for column selection? Avoid it!
</div>
</div>
<div class="callout-body-container callout-body">
<p>We can also access columns by position using <code>iloc</code> - but it is best not to if possible.</p>
<p>Suppose we want to access the 10th column in the data frame - then we want to select a column <em>by position</em>. In this case the 10th column is the annual sea level rise data and the 10th position corresponds to the index 9. We can select this column by position using the <code>iloc</code> selection:</p>
<div id="80d653e5" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select column by position using iloc</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co"># The syntax is iloc[row-indices, column-indices]</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="co"># [:,9] means "select all rows from the 10th column"</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>annual_rise_3 <span class="op">=</span> df.iloc[:,<span class="dv">9</span>]</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>annual_rise_3.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>0    85.0
1     NaN
2    73.0
3    70.0
4    71.0
Name: SDW_fall, dtype: float64</code></pre>
</div>
</div>
<p>Unless you are <em>really</em> looking for information about <em>the 10th column</em>, <strong>do not access a column by position</strong>. This is bound to break in many ways:</p>
<ul>
<li><p>it relies on a person correctly counting the position of a column. Even with a small dataset this can be prone to error.</p></li>
<li><p>it is not explicit: if we want information about sea level rise <code>df.annual_sea_level_rise</code> or <code>df['annual_sea_level_rise']</code> are explicitely telling us we are accessing that information. <code>df.iloc[:,9]</code> is obscure and uninformative.</p></li>
<li><p>datastets can get updated. Maybe a new column was added before <code>annual_sea_level_rise</code>, this would change the position of the column, which would make any code depending on <code>df.iloc[:,9]</code> invalid.</p></li>
</ul>
<p><strong>Accessing columns by labels helps reproducibility!</strong></p>
</div>
</div>
</section>
<section id="summary" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<div class="page-columns page-full">
<div id="fig-summary" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-summary-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca" class="page-columns page-full">
<img src="../../../book/images/lesson-3/pandas-selection-diagram.png" class="img-fluid figure-img column-page">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-summary-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Flow diagram for selecting core methods to subset a <code>pandas.DataFrame</code>.
</figcaption>
</figure>
</div>
</div>
</section>
<section id="resources" class="level2">
<h2 class="anchored" data-anchor-id="resources">Resources</h2>
<p>What is presented in this section is a comprehensive, but not exhaustive list of methods to select data in <code>pandas.DataFrames</code>. There are <em>so many</em> ways to subset data to get the same result. Some of the content from this lesson is adapted from the following resources and I encourage you to read them to learn more!</p>
<p>📖 <a href="https://pandas.pydata.org/docs/getting_started/intro_tutorials/03_subset_data.html">Pandas getting started tutorials - How to I select a subset of a DataFrame</a></p>
<p>📖 <a href="https://pandas.pydata.org/docs/user_guide/indexing.html#indexing-slicing-with-labels">Pandas documentation - User Guide - Indexing and Selecting Data</a></p>
<p>📖 <a href="https://wesmckinney.com/book/pandas-basics">Python for Data Analysis, 3E - Getting started with pandas</a></p>



</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body" data-entry-spacing="0" role="list">
<div id="ref-schroeter_ucsb_2024" class="csl-entry" role="listitem">
<div class="csl-left-margin">[1] </div><div class="csl-right-inline">S. C. Schroeter <em>et al.</em>, <span>“<span>UCSB</span> <span>SONGS</span> <span>Mitigation</span> <span>Monitoring</span>: <span>Wetland</span> <span>Survey</span> - <span>Bird</span> <span>Abundance</span>.”</span> Environmental Data Initiative, 2024. doi: <a href="https://doi.org/10.6073/PASTA/5E5E4D0C6BBF455B9F2474ED05C31072">10.6073/PASTA/5E5E4D0C6BBF455B9F2474ED05C31072</a>. Available: <a href="https://portal.edirepository.org/nis/mapbrowse?packageid=edi.649.6">https://portal.edirepository.org/nis/mapbrowse?packageid=edi.649.6</a>. [Accessed: Sep. 13, 2024]</div>
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>This work is licensed under <a href="https://creativecommons.org/licenses/by-nc/4.0/">CC Attribution-NonCommercial 4.0 International (CC BY-NC 4.0) License</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>This website is built with <a href="https://quarto.org/">Quarto</a> and <a href="https://github.com/MEDS-eds-220/MEDS-eds-220-course">GitHub pages</a>.</p>
</div>
  </div>
</footer>




</body></html>