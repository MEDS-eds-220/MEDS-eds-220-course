<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Snowshoe hares at Bonanza Creek Experimental Forest – EDS 220 - Working with Environmental Datasets</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-c1fac2584b48ed01fb6e278e36375074.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">EDS 220 - Working with Environmental Datasets</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../week-by-week/week-by-week.html"> 
<span class="menu-text">week by week</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../book/preface.html"> 
<span class="menu-text">notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../discussion-sections/discussion-sections-listing.html"> 
<span class="menu-text">discussion sections</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-github" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-bi-github">    
        <li>
    <a class="dropdown-item" href="https://github.com/carmengg/MEDS-eds-220-course">
 <span class="dropdown-text">Source code</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/carmengg/MEDS-eds-220-course/issues">
 <span class="dropdown-text">Report a bug</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <div id="quarto-announcement" data-announcement-id="c7b7782e967bb59a093245536bfed491" class="alert alert-primary hidden"><i class="bi bi-hammer quarto-announcement-icon"></i><div class="quarto-announcement-content">
<p>This wesbite is under construction.</p>
</div><i class="bi bi-x-lg quarto-announcement-action"></i></div>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#setup" id="toc-setup" class="nav-link active" data-scroll-target="#setup">Setup</a></li>
  <li><a href="#general-directions" id="toc-general-directions" class="nav-link" data-scroll-target="#general-directions">General directions</a></li>
  <li><a href="#about-the-data" id="toc-about-the-data" class="nav-link" data-scroll-target="#about-the-data">About the data</a></li>
  <li><a href="#archive-exploration" id="toc-archive-exploration" class="nav-link" data-scroll-target="#archive-exploration">1. Archive exploration</a></li>
  <li><a href="#adding-an-image" id="toc-adding-an-image" class="nav-link" data-scroll-target="#adding-an-image">2. Adding an image</a></li>
  <li><a href="#data-loading-and-preliminary-exploration" id="toc-data-loading-and-preliminary-exploration" class="nav-link" data-scroll-target="#data-loading-and-preliminary-exploration">3. Data loading and preliminary exploration</a></li>
  <li><a href="#detecting-messy-values" id="toc-detecting-messy-values" class="nav-link" data-scroll-target="#detecting-messy-values">4. Detecting messy values</a></li>
  <li><a href="#brainstorm" id="toc-brainstorm" class="nav-link" data-scroll-target="#brainstorm">5. Brainstorm</a></li>
  <li><a href="#clean-values" id="toc-clean-values" class="nav-link" data-scroll-target="#clean-values">6. Clean values</a></li>
  <li><a href="#calculate-mean-weight" id="toc-calculate-mean-weight" class="nav-link" data-scroll-target="#calculate-mean-weight">7. Calculate mean weight</a></li>
  <li><a href="#collect-your-code-and-explain-your-results" id="toc-collect-your-code-and-explain-your-results" class="nav-link" data-scroll-target="#collect-your-code-and-explain-your-results">8. Collect your code and explain your results</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Snowshoe hares at Bonanza Creek Experimental Forest</h1>
<p class="subtitle lead">Week 3 - Discussion section</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>This discussion section will guide you through exploring data about snowshoe hares in the (<em>Lepus americanus</em>) in the Bonanza Creek Experimental Forest located in Alaska, USA. In this discussion section, you will:</p>
<ul>
<li>Practice markdown syntax for creating tables and inserting images</li>
<li>Practice detecting and cleaning messy data</li>
<li>Use <code>groupby()</code> to calculate summary statistics by groups</li>
<li>Select, clean, and comment your code to create a condensed data analysis workflow</li>
</ul>
<section id="setup" class="level2">
<h2 class="anchored" data-anchor-id="setup">Setup</h2>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<ol type="1">
<li><p>Access the workbench-1 server.</p></li>
<li><p>Navigate to the<code>eds-220-sections</code> directory in the file navigation panel and the terminal.</p></li>
<li><p>Create a new Python notebook inside your <code>eds-220-sections</code> directory and rename it to <code>section-3-snowshoe-hares.ipynb</code>.</p></li>
<li><p>Use the terminal to push this file to you remote repository.</p></li>
</ol>
</div>
</div>
</div>
</section>
<section id="general-directions" class="level2">
<h2 class="anchored" data-anchor-id="general-directions">General directions</h2>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<ul>
<li>Add comments as appropriate along your code.</li>
<li>Include markdown cells in between your code cells to add titles and information to each exercise</li>
<li>You won’t need to upload any data.</li>
<li>Indications about when to commit and push changes are included. Commit every time you finish a major step! <strong>Remember to write your commits in the imperative mood.</strong></li>
</ul>
</div>
</div>
</div>
</section>
<section id="about-the-data" class="level2">
<h2 class="anchored" data-anchor-id="about-the-data">About the data</h2>
<p>For these exercises we will use data about <a href="https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-bnz.55.22">Snowshoe hares (<em>Lepus americanus</em>) in the Bonanza Creek Experimental Forest <span class="citation" data-cites="kielland_snowshoe_2017"><span>[1]</span></span></a>.</p>
<p>This dataset is stored in the <a href="https://edirepository.org">Environmental Data Initiative (EDI)</a> data repository. This is a huge data repository committed to make data Findable, Accessible, Interoperable, and Reusable (FAIR). It is the main repository for all the data associated to the <a href="https://lternet.edu">Long Term Ecological Research Network (LTER)</a>.</p>
</section>
<section id="archive-exploration" class="level2">
<h2 class="anchored" data-anchor-id="archive-exploration">1. Archive exploration</h2>
<ol type="a">
<li><p>Take some time to look through the dataset’s description in EDI and click around. Discuss the following questions with your team:</p>
<ol type="i">
<li>What is this data about?</li>
<li>During what time frame were the observations in the dataset collected?</li>
<li>Does the dataset contain sensitive data?</li>
<li>Is there a publication associated with this dataset?</li>
</ol></li>
<li><p>In your notebook: use a markdown cell to add a <em>brief</em> description of the dataset, including a citation, date of access, and a link to the archive.</p></li>
<li><p>Back in the EDI repository, click on <em>View Full Metadata</em> to access more information if you haven’t done so already. Go to the “Detailed Metadata” section and click on “Data Entities”. Take some time to look at the descriptions for the dataset’s columns.</p></li>
</ol>
</section>
<section id="adding-an-image" class="level2">
<h2 class="anchored" data-anchor-id="adding-an-image">2. Adding an image</h2>
<p>Back in your notebook, follow these steps to add an image of a hare using a URL:</p>
<ol type="a">
<li><p>Go to <a href="https://commons.wikimedia.org/wiki/File:SNOWSHOE_HARE_%28Lepus_americanus%29_%285-28-2015%29_quoddy_head,_washington_co,_maine_-01_%2818988734889%29.jpg">this link</a>.</p></li>
<li><p>Get the URL of the hare image. To do this:</p></li>
</ol>
<ul>
<li>hover over the image –&gt; right click –&gt; “Copy Image Address”.</li>
</ul>
<ol start="3" type="a">
<li>At the end of the markdown cell with the dataset description, use markdown sytanx to add the image from its URL:</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>![image description](URL-goes-here)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="4" type="a">
<li>Do you need to add an attribution in the image description? Check the license at the <a href="https://commons.wikimedia.org/wiki/File:SNOWSHOE_HARE_%28Lepus_americanus%29_%285-28-2015%29_quoddy_head,_washington_co,_maine_-01_%2818988734889%29.jpg">bottom of wikimedia page</a>.</li>
</ol>
<p style="text-align: center;">
<strong>commit, pull, and push changes</strong>
</p>
</section>
<section id="data-loading-and-preliminary-exploration" class="level2">
<h2 class="anchored" data-anchor-id="data-loading-and-preliminary-exploration">3. Data loading and preliminary exploration</h2>
<ol type="a">
<li>Back in your notebook, import the <code>55_Hare_Data_2012.txt</code> file from its URL using the <code>pandas.read_csv()</code> function. Store it in a variable named <code>hares</code>.</li>
</ol>
<!--

::: {#7eadec08 .cell execution_count=1}
``` {.python .cell-code}
import numpy as np
import pandas as pd

URL = 'https://portal.edirepository.org/nis/dataviewer?packageid=knb-lter-bnz.55.22&entityid=f01f5d71be949b8c700b6ecd1c42c701'
hares = pd.read_csv(URL)

hares.head()
```

::: {.cell-output .cell-output-display execution_count=1}
```{=html}
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">date</th>
<th data-quarto-table-cell-role="th">time</th>
<th data-quarto-table-cell-role="th">grid</th>
<th data-quarto-table-cell-role="th">trap</th>
<th data-quarto-table-cell-role="th">l_ear</th>
<th data-quarto-table-cell-role="th">r_ear</th>
<th data-quarto-table-cell-role="th">sex</th>
<th data-quarto-table-cell-role="th">age</th>
<th data-quarto-table-cell-role="th">weight</th>
<th data-quarto-table-cell-role="th">hindft</th>
<th data-quarto-table-cell-role="th">notes</th>
<th data-quarto-table-cell-role="th">b_key</th>
<th data-quarto-table-cell-role="th">session_id</th>
<th data-quarto-table-cell-role="th">study</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>11/26/1998</td>
<td>NaN</td>
<td>bonrip</td>
<td>1A</td>
<td>414D096A08</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>1370.0</td>
<td>160.0</td>
<td>NaN</td>
<td>917.0</td>
<td>51</td>
<td>Population</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>11/26/1998</td>
<td>NaN</td>
<td>bonrip</td>
<td>2C</td>
<td>414D320671</td>
<td>NaN</td>
<td>M</td>
<td>NaN</td>
<td>1430.0</td>
<td>NaN</td>
<td>NaN</td>
<td>936.0</td>
<td>51</td>
<td>Population</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>11/26/1998</td>
<td>NaN</td>
<td>bonrip</td>
<td>2D</td>
<td>414D103E3A</td>
<td>NaN</td>
<td>M</td>
<td>NaN</td>
<td>1430.0</td>
<td>NaN</td>
<td>NaN</td>
<td>921.0</td>
<td>51</td>
<td>Population</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>11/26/1998</td>
<td>NaN</td>
<td>bonrip</td>
<td>2E</td>
<td>414D262D43</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>1490.0</td>
<td>135.0</td>
<td>NaN</td>
<td>931.0</td>
<td>51</td>
<td>Population</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>11/26/1998</td>
<td>NaN</td>
<td>bonrip</td>
<td>3B</td>
<td>414D2B4B58</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>1710.0</td>
<td>150.0</td>
<td>NaN</td>
<td>933.0</td>
<td>51</td>
<td>Population</td>
</tr>
</tbody>
</table>

</div>
```
:::
:::


-->
<ol start="2" type="a">
<li>Using <code>pandas</code> methods, obtain preliminary information and explore this data frame. Consider answering some of these questions:</li>
</ol>
<ul>
<li>What are the dimensions of the dataframe and what are the data types of the columns? Do the data types match what you would expect from each column?</li>
<li>Are there any columns that have a significant number of NA values?</li>
<li>What are the minimum and maximum values for the weight and hind feet measurements?</li>
<li>What are the unique values for some of the categorical columns?</li>
<li>An explroatory question about the data frame you come up with!</li>
</ul>
<p style="text-align: center;">
<strong>CHECK IN WITH YOUR TEAM</strong>
</p>
<p style="text-align: center;">
<strong>MAKE SURE YOU’VE ALL SUCCESSFULLY ACCESSED THE DATA BEFORE CONTINUING</strong>
</p>
<p style="text-align: center;">
<strong>commit, pull, and push changes</strong>
</p>
</section>
<section id="detecting-messy-values" class="level2">
<h2 class="anchored" data-anchor-id="detecting-messy-values">4. Detecting messy values</h2>
<ol type="a">
<li>In the metadata section of the EDI repository, find which are the allowed values for the hares’ sex. Create a small <a href="https://www.markdownguide.org/extended-syntax/#tables">table in a markdown cell</a> showing the values and their definitions.</li>
</ol>
<!--
*Allowed values are:*

| Value | Definition |
| ------| ---------- |
| f | female |
| m | male |
| m?| male not confirmed |
-->
<ol start="2" type="a">
<li>Get the number of times each unique sex non-NA value appears.</li>
</ol>
<!--

::: {#fa349380 .cell execution_count=2}
``` {.python .cell-code}
hares['sex'].value_counts()
```

::: {.cell-output .cell-output-display execution_count=2}
```
sex
F     1161
M      730
f      556
m      515
?       40
F?      10
f        4
m        4
f?       3
M?       2
m?       2
pf       1
Name: count, dtype: int64
```
:::
:::


-->
<ol start="3" type="a">
<li><p>Check the <a href="https://pandas.pydata.org/docs/reference/api/pandas.Series.value_counts.html">documentation of <code>value_counts()</code></a>. What is the purpose of the <code>dropna</code> parameter and what is its default value? Repeat step (a), this time adding the <code>dropna=False</code> parameter to <code>value_counts()</code>. <!--

::: {#0401efe2 .cell execution_count=3}
``` {.python .cell-code}
hares['sex'].value_counts(dropna=False)
```

::: {.cell-output .cell-output-display execution_count=3}
```
sex
F      1161
M       730
f       556
m       515
NaN     352
?        40
F?       10
f         4
m         4
f?        3
M?        2
m?        2
pf        1
Name: count, dtype: int64
```
:::
:::


--></p></li>
<li><p>Discuss with your team the output of the unique value counts. In particular:</p>
<ol type="i">
<li>Do the values in the <code>sex</code> column correspond to the values declared in the metadata?</li>
<li>What could have been potential causes for multiple codes?</li>
<li>Are there seemingly repated values? If so, what could be the cause?</li>
</ol></li>
<li><p>Write code to confirm your suspicions about c-iii.</p></li>
</ol>
<!--

::: {#aa3634e5 .cell execution_count=4}
``` {.python .cell-code}
hares['sex'].unique()
```

::: {.cell-output .cell-output-display execution_count=4}
```
array([nan, 'M', 'F', '?', 'F?', 'M?', 'pf', 'm', 'f', 'f?', 'm?', 'f ',
       'm '], dtype=object)
```
:::
:::


-->
<p style="text-align: center;">
<strong>commit, pull, and push changes</strong>
</p>
</section>
<section id="brainstorm" class="level2">
<h2 class="anchored" data-anchor-id="brainstorm">5. Brainstorm</h2>
<ol type="a">
<li><p>Individually, write step-by-step instructions on how you would wrangle the <code>hares</code> data frame to clean the values in the <code>sex</code> column to have only two classes <code>female</code> and <code>male</code>. Which codes would you assign to each new class? <strong>Remember:</strong> It’s ok if you don’t know how to code each step - it’s more important to have an idea of what you would like to do.</p></li>
<li><p>Discuss your step-by-step instructions with your team.</p></li>
</ol>
<p>The next exercise will guide you through cleaning the sex codes. There are <em>many</em> ways of doing this. The one presented here might not be the same way you thought about doing it - that’s ok! This one was designed to practice using the <code>numpy.select()</code> function.</p>
</section>
<section id="clean-values" class="level2">
<h2 class="anchored" data-anchor-id="clean-values">6. Clean values</h2>
<ol type="a">
<li>Create a new column called <code>sex_simple</code> using the <code>numpy.select()</code> function so that</li>
</ol>
<ul>
<li>‘F’, ‘f’, and ‘f_’ in the <code>sex</code> column get assigned to ‘female’,</li>
<li>‘M’, ‘m’, and ‘m_’ get assigned to ‘male’, and</li>
<li>anything else gets assigned <code>np.nan</code></li>
</ul>
<!--

::: {#fcc1ca36 .cell execution_count=5}
``` {.python .cell-code}
conditions = [(hares.sex=='F') | (hares.sex=='f') |(hares.sex=='f '),
              (hares.sex=='M') | (hares.sex=='m') |(hares.sex=='m ')]

choices = ['female', 
            'male']

hares['sex_simple'] = np.select(conditions, choices, default=np.nan)
hares.head()
```

::: {.cell-output .cell-output-display execution_count=5}
```{=html}
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">date</th>
<th data-quarto-table-cell-role="th">time</th>
<th data-quarto-table-cell-role="th">grid</th>
<th data-quarto-table-cell-role="th">trap</th>
<th data-quarto-table-cell-role="th">l_ear</th>
<th data-quarto-table-cell-role="th">r_ear</th>
<th data-quarto-table-cell-role="th">sex</th>
<th data-quarto-table-cell-role="th">age</th>
<th data-quarto-table-cell-role="th">weight</th>
<th data-quarto-table-cell-role="th">hindft</th>
<th data-quarto-table-cell-role="th">notes</th>
<th data-quarto-table-cell-role="th">b_key</th>
<th data-quarto-table-cell-role="th">session_id</th>
<th data-quarto-table-cell-role="th">study</th>
<th data-quarto-table-cell-role="th">sex_simple</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>11/26/1998</td>
<td>NaN</td>
<td>bonrip</td>
<td>1A</td>
<td>414D096A08</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>1370.0</td>
<td>160.0</td>
<td>NaN</td>
<td>917.0</td>
<td>51</td>
<td>Population</td>
<td>nan</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>11/26/1998</td>
<td>NaN</td>
<td>bonrip</td>
<td>2C</td>
<td>414D320671</td>
<td>NaN</td>
<td>M</td>
<td>NaN</td>
<td>1430.0</td>
<td>NaN</td>
<td>NaN</td>
<td>936.0</td>
<td>51</td>
<td>Population</td>
<td>male</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>11/26/1998</td>
<td>NaN</td>
<td>bonrip</td>
<td>2D</td>
<td>414D103E3A</td>
<td>NaN</td>
<td>M</td>
<td>NaN</td>
<td>1430.0</td>
<td>NaN</td>
<td>NaN</td>
<td>921.0</td>
<td>51</td>
<td>Population</td>
<td>male</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>11/26/1998</td>
<td>NaN</td>
<td>bonrip</td>
<td>2E</td>
<td>414D262D43</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>1490.0</td>
<td>135.0</td>
<td>NaN</td>
<td>931.0</td>
<td>51</td>
<td>Population</td>
<td>nan</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>11/26/1998</td>
<td>NaN</td>
<td>bonrip</td>
<td>3B</td>
<td>414D2B4B58</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>1710.0</td>
<td>150.0</td>
<td>NaN</td>
<td>933.0</td>
<td>51</td>
<td>Population</td>
<td>nan</td>
</tr>
</tbody>
</table>

</div>
```
:::
:::


-->
<ol start="2" type="a">
<li>Check the counts of unique values (including NAs) in the new <code>sex_simple</code> column. <!--

::: {#758e16b3 .cell execution_count=6}
``` {.python .cell-code}
hares['sex_simple'].value_counts()
```

::: {.cell-output .cell-output-display execution_count=6}
```
sex_simple
female    1721
male      1249
nan        410
Name: count, dtype: int64
```
:::
:::


--></li>
</ol>
<p style="text-align: center;">
<strong>commit, pull, and push changes</strong>
</p>
</section>
<section id="calculate-mean-weight" class="level2">
<h2 class="anchored" data-anchor-id="calculate-mean-weight">7. Calculate mean weight</h2>
<ol type="a">
<li>Use <code>groupby()</code> to calculate the mean weight by sex using the new column.</li>
</ol>
<!--

::: {#b34389fd .cell execution_count=7}
``` {.python .cell-code}
hares.groupby('sex_simple')['weight'].mean()
```

::: {.cell-output .cell-output-display execution_count=7}
```
sex_simple
female    1365.164792
male      1349.935542
nan       1193.364055
Name: weight, dtype: float64
```
:::
:::


-->
<ol start="2" type="a">
<li>Write a full sentence explaining the results you obtained. Don’t forget to include units.</li>
</ol>
<p style="text-align: center;">
<strong>commit, pull, and push changes</strong>
</p>
</section>
<section id="collect-your-code-and-explain-your-results" class="level2">
<h2 class="anchored" data-anchor-id="collect-your-code-and-explain-your-results">8. Collect your code and explain your results</h2>
<p>In a new code cell, collect all the relevant code to create a streamlined workflow to obtain the final result from exercise 7 starting from importing the data. Your code cell should:</p>
<ul>
<li>Only print the final results for mean weight by <code>sex_simple</code>.</li>
<li>Not include output from intermediate variables or checks.</li>
<li>Not include methods or functions that do not directly contribute to the analysis (even if they don’t print anything ex: <code>df.head()</code>).</li>
<li>If appropriate, combine methods using code chaining instead of creating intermediate variables.</li>
<li>Comment your code following our class comments guidelines.</li>
<li>Use appropriate line breaks and indentation to make code readable.</li>
</ul>
<!-- 

::: {#61f87386 .cell execution_count=8}
``` {.python .cell-code}
# Load data from EDI data repository
URL = 'https://portal.edirepository.org/nis/dataviewer?packageid=knb-lter-bnz.55.22&entityid=f01f5d71be949b8c700b6ecd1c42c701'
hares = pd.read_csv(URL)

# Create new sex_simpel column dropping the uncertain sex codes and 
# simplifying codes without no question mark
conditions = [(hares.sex=='F') | (hares.sex=='f') |(hares.sex=='f '),
              (hares.sex=='M') | (hares.sex=='m') |(hares.sex=='m ')]
choices = ['female', 'male']

hares['sex_simple'] = np.select(conditions, choices, default=np.nan)

# Calculate average hare weight by sex
hares.groupby('sex_simple')['weight'].mean()
```

::: {.cell-output .cell-output-display execution_count=8}
```
sex_simple
female    1365.164792
male      1349.935542
nan       1193.364055
Name: weight, dtype: float64
```
:::
:::


-->
<!--TODO: add explanation of why this is important-->
<p style="text-align: center;">
<strong>commit, pull, and push changes</strong>
</p>



</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body" data-entry-spacing="0" role="list">
<div id="ref-kielland_snowshoe_2017" class="csl-entry" role="listitem">
<div class="csl-left-margin">[1] </div><div class="csl-right-inline">K. Kielland, F. S. Chapin, R. W. Ruess, and Bonanza Creek LTER, <span>“Snowshoe hare physical data in <span>Bonanza</span> <span>Creek</span> <span>Experimental</span> <span>Forest</span>: 1999-<span>Present</span>.”</span> Environmental Data Initiative, 2017. doi: <a href="https://doi.org/10.6073/PASTA/03DCE4856D79B91557D8E6CE2CBCDC14">10.6073/PASTA/03DCE4856D79B91557D8E6CE2CBCDC14</a>. Available: <a href="https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-bnz.55.22">https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-bnz.55.22</a>. [Accessed: Oct. 12, 2024]</div>
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>This work is licensed under <a href="https://creativecommons.org/licenses/by-nc/4.0/">CC Attribution-NonCommercial 4.0 International (CC BY-NC 4.0) License</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>This website is built with <a href="https://quarto.org/">Quarto</a> and <a href="https://github.com/MEDS-eds-220/MEDS-eds-220-course">GitHub pages</a>.</p>
</div>
  </div>
</footer>




</body></html>